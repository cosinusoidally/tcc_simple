set -xe

for i in $(find ../tcc-0.9.26-lb/ -type f); do
echo load_file $i $i
done > artifacts/full.list

for i in $(find ../mes-0.27/ -type f); do
echo load_file $i $i
done >> artifacts/full.list

pushd .
cd ../pnut_refactor/

for i in $(find portable_libc -type f); do
echo load_file ../pnut_refactor/$i $i
done >> ../xp_linux/artifacts/full.list

popd

# hack shouldn't be necessary but something odd seems to be happening with
# includes

pushd .
cd ../mes-0.27/include/

for i in $(find mes -type f); do
echo load_file ../mes-0.27/include/$i ../artifacts/boot0/$i
done >> ../../xp_linux/artifacts/full.list

popd
